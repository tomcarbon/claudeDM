export const CURRENT_VERSION = '1.0.3';

export const CHANGELOG = [
  {
    version: '1.0.3',
    date: '2026-02-28',
    title: 'Current Release',
    compareFrom: '1.0.2',
    compareRef: '98bb2b4 ("v1.0.2 fix missing characters and sessions folder on install")',
    highlights: [
      'Per-player data isolation: each player now gets their own copy of characters and NPCs under `data/players/<slug>/`, so one player\'s changes never affect another\'s.',
      'Added player data provisioning — new players are automatically set up with default characters and NPCs on first login.',
      'Migration script (`scripts/migrate-player-data.js`) to move existing player data into the new per-player directory structure.',
      'Character and NPC API routes updated to serve player-specific data based on login context.',
      'DM engine now builds player-aware context, serving the correct character/NPC files for each player\'s session.',
      'Character death tracking: all characters and NPCs now carry a `status` field ("alive" or "dead") for persistent death state.',
      'Expanded CLAUDE.md DM guidelines with mandatory post-encounter checklists, chapter summaries, session-end checklists, and detailed item tracking rules.',
      'Mobile party chat: floating action button opens a slide-over chat panel on narrow screens (≤1100px).',
      'World map legend label cleaned up ("Updated Key" → "Key").',
      'Cryptographic dice rolling: new RollDice MCP tool uses `crypto.randomInt()` for true uniform randomness — no more AI-biased rolls. Per-player "Realistic Dice" toggle in Settings.',
      'Smart auto-scroll in Adventure and Party Chat — scrolling up to read history is now respected; a scroll-to-bottom button appears when you\'re not at the latest message.',
      'Subrace display fix: eliminated redundant labels like "High Elf Elf" — now correctly shows "High Elf" across character cards, detail pages, adventure setup, and DM narration.',
      'Custom favicon (D&D icon) and page title ("D&D Session") replace the Vite defaults.',
      'MCP tools server renamed from `dnd-xp` to `dnd-tools` with version bump to 1.0.3.',
      'Player Agency expanded to 5 tiers (Railroaded → Guided → Collaborative → Freeform → Sandbox). Player Autonomy now auto-derives from the Agency selection and displays as a read-only slider.',
      'DM settings cleanup: removed unused `romance` and `combatFocus` sliders from defaults and engine. Quick presets updated to match the new agency/autonomy mapping.',
      'DM engine narration cleanup: removed legacy tone and narration style mappings that were no longer selectable in the UI.',
      'CLAUDE.md refinements: improved item-count tracking rules (pickles, arrows, torches), added convention to reference CLAUDE.md after each player turn.',
    ],
  },
  {
    version: '1.0.2',
    date: '2026-02-23',
    title: 'Previous Release',
    compareFrom: '1.0.1',
    compareRef: '3c6d5e3 ("admin hardening sections")',
    highlights: [
      'Stricter session and campaign ownership enforcement with clear read-only metadata for non-owners.',
      'Adventure flow now respects read-only mode for save/start/import actions and auto-save behavior.',
      'Expanded DM personality controls with presets, Player Autonomy tuning, and clearer per-player vs global state.',
      'Admin controls now include global DM personality shuffle handling and restore-default coverage for DM settings.',
      'Campaign setup and API integration were expanded for smoother create/list/update/delete workflows.',
      'World map presentation refreshed with updated art, clearer region labels, and legend/hover readability polish.',
      'Session list now includes time details, plus startup hardening for missing `data/characters` directory.',
    ],
  },
  {
    version: '1.0.1',
    date: '2026-02-21',
    title: 'Previous Release',
    compareFrom: '1.0.0',
    compareRef: '76e2c07 ("change horror to darkness")',
    highlights: [
      'Persistent party chat with daily archives and live player presence.',
      'Player account flows (login/register/password) and role-aware UI behavior.',
      'Admin-only protection for system settings and DM settings writes (UI + API).',
      'DM personality shuffle automation: rotates daily at midnight Pacific time (PDT/PST).',
      'Manual DM personality controls are locked whenever AI shuffle is enabled.',
      'Rich text rendering hardening and fix for session-load UI freezing.',
      'Public "What\'s New" page with semantic version history.',
    ],
  },
  {
    version: '1.0.0',
    date: '2026-02-18',
    title: 'Stable Baseline',
    highlights: [
      'Baseline captured by commit 76e2c07 ("change horror to darkness").',
    ],
  },
];
